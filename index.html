<!DOCTYPE html>
<html lang="en">
<head>
	<script src="jquery-ui-1.11.2/external/jquery/jquery.js"></script>
	<script src="jquery-ui-1.11.2/jquery-ui.js"></script>
	<script src="tag-it/js/tag-it.min.js"></script>
	
	<!--for CheckBoxes-->
	<script src="jquery-1.11.0.min.js"></script>
	<script src="fm.checkator.jquery.js"></script>
	<link rel="stylesheet" href="fm.checkator.jquery.css"/>

	<link href="jquery-ui-1.11.2/jquery-ui.css" rel="stylesheet">
	<link href="tag-it/css/jquery.tagit.css" rel="stylesheet" type="text/css">
    <link href="tag-it/css/tagit.ui-zendesk.css" rel="stylesheet" type="text/css">

    <!--for Location-->
	<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src="//code.jquery.com/ui/1.10.3/jquery-ui.min.js"></script>
	<script src="js/jquery-ui-slider-pips.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/jquery-ui-slider-pips.css">

	
	<style>
		html, body {
			height:100%;
			width:100%;
			margin:0px;
		}

		#filterAccordion > div {
			padding:15px;
		}

		#filters, results {
			padding:0px;
		}
	</style>
</head>
<body>
	<table id="PageLayout" style="width:100%; height:100%;">
		<tr height="15%">
			<td width="300px">
				<h1>Yelp</h1>
			</td>
			<td>
				Search: <input style="width:300px;" type="text">
			</td>
		</tr>
		<tr height="85%">
			<td width="300px">
				<div id="tabs" style="height:100%;">
					<ul>
						<li><a href="#filters">Filters</a></li>
						<li><a href="#results">Results</a></li>
					</ul>
					<div id="filters">
						<div id="filterAccordion">
							<h3>Location</h3>
							<div id="locationPanel"></div>
							<h3>Cost</h3>
							<div id="costPanel"></div>
							<h3>Cuisine</h3>
							<div id="cuisinePanel"></div>
							<h3>Ratings</h3>
							<div id="ratingsPanel">
								<legend>Customer Ratings</legend>
								<input type="checkbox" class="checkbox2"> <label>5 stars</label><br>
								<input type="checkbox" class="checkbox2"> <label>4 stars</label><br>
								<input type="checkbox" class="checkbox2"> <label>3 stars</label><br>
								<input type="checkbox" class="checkbox2"> <label>2 stars</label><br>
								<input type="checkbox" class="checkbox2"> <label>1 star</label><br>
							</div>
							<h3>Features</h3>
							<div id="featuresPanel">
								<legend>Restaurant Features</legend>
								<input type="checkbox" class="checkbox1"> <label>Accepts debit/credit</label><br>
								<input type="checkbox" class="checkbox1"> <label>Delivery</label><br>
								<input type="checkbox" class="checkbox1"> <label>Takes Reservations</label><br>
								<input type="checkbox" class="checkbox1"> <label>Wheelchair Accessible</label><br>
								<input type="checkbox" class="checkbox1"> <label>Good for Kids</label><br>
								<input type="checkbox" class="checkbox1"> <label>Good for Groups</label><br>
								<input type="checkbox" class="checkbox1"> <label>19+ Only</label><br>
								<input type="checkbox" class="checkbox1"> <label>Fast Food</label><br>
								<input type="checkbox" class="checkbox1"> <label>Organic/Locally Grown</label><br>
							</div>
						</div>
					</div>
					<div id="results">Big list of results</div>
				</div>
			</td>
			<td>
				<div style="width:100%; height:100%;">
					<iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d83358.60984702894!2d-123.15089349716797!3d49.23931284111058!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sgoogle+maps!5e0!3m2!1sen!2sca!4v1415819074712" frameborder="0" style="border:0; position:absolute;"></iframe>
					<svg height="100" width="100" style="position:absolute;">
						<circle fill-opacity="0.5" cx="50%" cy="50%" r="40" stroke="black" stroke-width="1" fill="red" style="cursor:move;"/>
					</svg>
				</div>
			</td>
		</tr>
	</table>

	<script>
		// Set up the map size
		$( document ).ready(function() {
			$("iframe").css("width", $("iframe").parent().width())
			$("iframe").css("height", $("iframe").parent().height())
		});
		$(window).resize(function(){
			$("iframe").css("width", $("iframe").parent().width())
			$("iframe").css("height", $("iframe").parent().height())
		});

		// Set up the circle events
		var beingDragged = false
		$('circle:last').mousedown(function(event){
			beingDragged = true
		})
		$('svg').mousemove(function(event){
			offsetX = event.offsetX + $("svg").position().left
			offsetY = event.offsetY + $("svg").position().top
			circleRadius = $("svg").css('width').replace("px", "")/2
			if (beingDragged && offsetX - circleRadius > $("svg").parent().position().left && offsetY - circleRadius > $("svg").parent().position().top){
				$("svg").css('left', offsetX - circleRadius)
				$("svg").css('top', offsetY - circleRadius)
			}
		})
		$('body').mouseup(function(event){
			beingDragged = false
		})

		$("#tabs").tabs();
		$("#filterAccordion").accordion({
			collapsible: true,
			heightStyle: "content"
		});
		makeLocationSearchWidget()
		//makeLocationRadiusWidget()
		makeCostWidget()
		makeCuisineWidget()
		makeRatingsWidget()



		function makeWidgetLabel(panel, label){
			$("#" + panel).append('<div style="margin:0px 0px 10px 0px">' + label + '</div>')
		}

		function makeCostWidget(){
			makeWidgetLabel("costPanel", "Average Price of Main Plate")

			// Make the div which will hold the min max labels and the slider
			var widgetDiv = $("#costPanel").append("<div></div>")
			widgetDiv.append('<div id="sliderMin" style="position:relative; top:-5px; float:left; width:10px;">5</div>')
			widgetDiv.append('<div class="slider" style="position:relative; margin: 0px 5px 0px 10px; width:210px; float:left;"></div>')
			widgetDiv.append('<div id="sliderMax" style="position:relative; top:-5px; float:left; width:10px;">20</div>')
				
			$(".slider").slider({
				max: 30,
				min: 0,
				range: true,
				step: 5,
				values: [5, 20],
				slide: function(event, ui){
					$("#sliderMin").text(ui.values[0])
					$("#sliderMax").text(ui.values[1])
				}
			});
		};

		function makeCuisineWidget(){
			makeWidgetLabel("cuisinePanel", "Cuisine Preference")

			var options = ["Chinese", "Mexican", "Indian", "Japanese", "French", "Italian"]
			$("#cuisinePanel").append("<ul></ul>")
			$("#cuisinePanel > ul").tagit({
				availableTags: options,
				autocomplete: {delay: 0, minLength: 1, autoFocus: true},
				beforeTagAdded: function(event, ui){
					if (options.indexOf(ui.tagLabel) != -1){
						return true
					}else{
						return false
					}
				}
			})
		};

		function makeLocationSearchWidget() {
			makeWidgetLabel("locationPanel", "Where do you want to eat?")

			//search bar
			var options = ["UBC", "Point Grey", "Kitsilano", "Dunbar", "Arbutus", "Kerrisdale"]
			$("#locationPanel").append("<ul></ul>")
			$("#locationPanel > ul").tagit({
				availableTags: options,
				autocomplete: {delay: 0, minLength: 1, autoFocus: true},
				beforeTagAdded: function(event, ui){
					if (options.indexOf(ui.tagLabel) != -1){
						return true
					}else{
						return false
					}
				}
			});
		};

		function makeLocationRadiusWidget() {
			//radius slider bar
			makeWidgetLabel("locationPanel", "Distance from Restaurant")
			var widgetDiv = $("#locationPanel").append("<ul></ul>")

			widgetDiv.append('<div class="sliderL" style="position:relative; margin: 0px 5px 0px 10px; width:210px; float:left;"></div>')

			$(".sliderL").slider({
				max: 30,
				value: 15,
				steps: 5
				
			});
			$(".sliderL").slider('pips');
			$(".sliderL").slider('float', {pips: true} );
		}
			
				

		function makeRatingsWidget(){
			//makeWidgetLabel("ratingsPanel", "Customer Ratings")

			//$('.checkbox2').checkator();

			// 5, 4, 3, 2, 1 star options
			// options as check boxes
		};


	</script>

</body>
</html>