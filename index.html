<!DOCTYPE html>
<html>
<head>
	<script src="jquery-ui-1.11.2/external/jquery/jquery.js"></script>
	<script src="jquery-ui-1.11.2/jquery-ui.js"></script>
	<script src="tag-it/js/tag-it.min.js"></script>


	<link href="jquery-ui-1.11.2/jquery-ui.css" rel="stylesheet">
	<link href="tag-it/css/jquery.tagit.css" rel="stylesheet" type="text/css">
    <link href="tag-it/css/tagit.ui-zendesk.css" rel="stylesheet" type="text/css">
	<style>
		html, body {
			height:100%;
			width:100%;
			margin:0px;
		}

		#filterAccordion > div {
			padding:15px;
		}

		#filters, results {
			padding:0px;
		}
	</style>
</head>
<body>
	<table id="PageLayout" style="width:100%; height:100%;">
		<tr height="15%">
			<td width="300px">
				<h1>Yelp</h1>
			</td>
			<td>
				Search: <input style="width:300px;" type="text">
			</td>
		</tr>
		<tr height="85%">
			<td width="300px">
				<div id="tabs" style="height:100%;">
					<ul>
						<li><a href="#filters">Filters</a></li>
						<li><a href="#results">Results</a></li>
					</ul>
					<div id="filters">
						<div id="filterAccordion">
							<h3>Cost</h3>
							<div id="costPanel"></div>
							<h3>Cuisine</h3>
							<div id="cuisinePanel"></div>
							<h3>Location</h3>
							<div>some location stuff</div>
							<h3>Ratings</h3>
							<div>some rating stuff</div>
							<h3>Features</h3>
							<div>some features stuff</div>
						</div>
					</div>
					<div id="results">Big list of results</div>
				</div>
			</td>
			<td>
				<div style="width:100%; height:100%;">
					<iframe src="https://www.google.com/maps/embed?pb=!1m16!1m12!1m3!1d83358.60984702894!2d-123.15089349716797!3d49.23931284111058!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!2m1!1sgoogle+maps!5e0!3m2!1sen!2sca!4v1415819074712" frameborder="0" style="border:0; position:absolute;"></iframe>
					<svg height="100" width="100" style="position:absolute;">
						<circle fill-opacity="0.5" cx="50%" cy="50%" r="40" stroke="black" stroke-width="1" fill="red" />
					</svg>
				</div>
			</td>
		</tr>
	</table>

	<script>
		// Set up the map size
		$( document ).ready(function() {
			$("iframe").css("width", $("iframe").parent().width())
			$("iframe").css("height", $("iframe").parent().height())
			$("svg").css("width", $("svg").parent().width())
			$("svg").css("height", $("svg").parent().height())
		});
		$(window).resize(function(){
			$("iframe").css("width", $("iframe").parent().width())
			$("iframe").css("height", $("iframe").parent().height())
			$("svg").css("width", $("svg").parent().width())
			$("svg").css("height", $("svg").parent().height())
		});

		var beingDragged = false
		$('circle').mousedown(function(event){
			beingDragged = true
		})
		$('circle').mousemove(function(event){
			if (beingDragged){
				this.setAttribute('cx', event.offsetX)
				this.setAttribute('cy', event.offsetY)
			}
		})
		$('circle').mouseup(function(event){
			beingDragged = false
		})

		$("#tabs").tabs();
		$("#filterAccordion").accordion({
			collapsible: true,
			heightStyle: "content"
		});
		makeCostWidget()
		makeCuisineWidget()

		function makeWidgetLabel(panel, label){
			$("#" + panel).append('<div style="margin:0px 0px 10px 0px">' + label + ':</div>')
		}

		function makeCostWidget(){
			makeWidgetLabel("costPanel", "Price Range")

			// Make the div which will hold the min max labels and the slider
			var widgetDiv = $("#costPanel").append("<div></div>")
			widgetDiv.append('<div id="sliderMin" style="position:relative; top:-5px; float:left; width:10px;">5</div>')
			widgetDiv.append('<div class="slider" style="position:relative; margin: 0px 5px 0px 10px; width:210px; float:left;"></div>')
			widgetDiv.append('<div id="sliderMax" style="position:relative; top:-5px; float:left; width:10px;">10</div>')
				
			$(".slider").slider({
				max: 30,
				min: 5,
				range: true,
				step: 5,
				values: [5, 20],
				slide: function(event, ui){
					$("#sliderMin").text(ui.values[0])
					$("#sliderMax").text(ui.values[1])
				}
			});
		}

		function makeCuisineWidget(){
			makeWidgetLabel("cuisinePanel", "Cuisine Preference")

			var options = ["Chinese", "Mexican", "Indian", "Japanese", "French"]
			$("#cuisinePanel").append("<ul></ul>")
			$("#cuisinePanel > ul").tagit({
				availableTags: options,
				autocomplete: {delay: 0, minLength: 1, autoFocus: true},
				beforeTagAdded: function(event, ui){
					if (options.indexOf(ui.tagLabel) != -1){
						return true
					}else{
						return false
					}
				}
			})
		}
	</script>

</body>
</html>